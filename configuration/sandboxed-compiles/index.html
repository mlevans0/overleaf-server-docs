
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../getting-server-pro/">
      
      
        <link rel="next" href="../ldap/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Sandboxed Compiles - Overleaf Server Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


  
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--server_pro{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 80v149.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0l133.5-133.5c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7H48C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>');}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#improved-security" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Overleaf Server Docs" class="md-header__button md-logo" aria-label="Overleaf Server Docs" data-md-component="logo">
      
  <img src="../../assets/overleaf-logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Overleaf Server Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sandboxed Compiles
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mlevans0/overleaf-server-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/using-the-toolkit/" class="md-tabs__link">
          
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overleaf-toolkit/" class="md-tabs__link">
          
  
  Configuration

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../maintenance/data-and-backups/" class="md-tabs__link">
          
  
  Maintenance

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/for-users/" class="md-tabs__link">
          
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../release-notes/Release-Notes-5.x.x/" class="md-tabs__link">
          
  
  Release notes

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Overleaf Server Docs" class="md-nav__button md-logo" aria-label="Overleaf Server Docs" data-md-component="logo">
      
  <img src="../../assets/overleaf-logo-white.svg" alt="logo">

    </a>
    Overleaf Server Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mlevans0/overleaf-server-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Planning for success
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/what-skills-do-i-need/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What skills do I need?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/hardware-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/software-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/microservices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overleaf microservices
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/using-the-toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the Overleaf Toolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/post-installation-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Post-installation tasks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Overleaf Toolkit
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Overleaf Toolkit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overleaf-toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Files and locations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolkit-settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Toolkit settings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../branding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tls-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLS Proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../email/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring email
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Server Pro
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Server Pro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-server-pro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Server Pro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Sandboxed Compiles
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Sandboxed Compiles
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#improved-security" class="md-nav__link">
    <span class="md-ellipsis">
      Improved security
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easier-package-management" class="md-nav__link">
    <span class="md-ellipsis">
      Easier package management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-sandboxed-compiles" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Sandboxed Compiles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Sandboxed Compiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolkit" class="md-nav__link">
    <span class="md-ellipsis">
      Toolkit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-tex-live-image" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the Tex Live Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Changing the Tex Live Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-tex-live-images" class="md-nav__link">
    <span class="md-ellipsis">
      Available Tex Live images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-tex-live" class="md-nav__link">
    <span class="md-ellipsis">
      Extending Tex Live
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extending Tex Live">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-and-updating-new-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Installing and updating new packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-tlmgr-in-an-older-tex-live-image" class="md-nav__link">
    <span class="md-ellipsis">
      Using tlmgr in an older TeX Live image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-new-fonts" class="md-nav__link">
    <span class="md-ellipsis">
      Installing new fonts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-server-pro-to-use-the-new-images" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Server Pro to use the new images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP/AD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../saml2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SAML 2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git-bridge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-learn-pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding Learn pages
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment-variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Localization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Maintenance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/data-and-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data and Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/email-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Email migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/docker-compose-to-toolkit-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Compose to Toolkit migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/updating-mongodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/s3-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3 migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/horizontal-scaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horizontal scaling
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/for-users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    For users
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    For administrators
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            For administrators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/user-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/project-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/doc-version-recovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Doc version recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/full-project-history-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full project history migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_5" >
        
          
          <label class="md-nav__link" for="__nav_6_2_5" id="__nav_6_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_5">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gathering information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/common-problems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common problems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Release notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes-5.x.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.x.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes-4.x.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.x.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes-3.x.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.x.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes-2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.x.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---1.0.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.6.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.6.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.5.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.5.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.4.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.4.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.3.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.3.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.1.3-and-0.1.4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.1.3 and 0.1.4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/Release-Notes---0.1.2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.1.2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#improved-security" class="md-nav__link">
    <span class="md-ellipsis">
      Improved security
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easier-package-management" class="md-nav__link">
    <span class="md-ellipsis">
      Easier package management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-sandboxed-compiles" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Sandboxed Compiles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Sandboxed Compiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolkit" class="md-nav__link">
    <span class="md-ellipsis">
      Toolkit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-tex-live-image" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the Tex Live Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Changing the Tex Live Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-tex-live-images" class="md-nav__link">
    <span class="md-ellipsis">
      Available Tex Live images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-tex-live" class="md-nav__link">
    <span class="md-ellipsis">
      Extending Tex Live
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extending Tex Live">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-and-updating-new-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Installing and updating new packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-tlmgr-in-an-older-tex-live-image" class="md-nav__link">
    <span class="md-ellipsis">
      Using tlmgr in an older TeX Live image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-new-fonts" class="md-nav__link">
    <span class="md-ellipsis">
      Installing new fonts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-server-pro-to-use-the-new-images" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Server Pro to use the new images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
      
      
        
      
    
    
      <span class="md-tag md-tag-icon md-tag--server_pro">Server Pro</span>
    
  
</nav>


  
    <a href="https://github.com/mlevans0/overleaf-server-docs/edit/main/docs/configuration/sandboxed-compiles.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


  <h1>Sandboxed Compiles</h1>

<p>Server Pro comes with the option to run compiles in a secured sandbox environment for enterprise security. It does this by running every project in its own secured Docker environment. With Sandboxed Compiles you also benefit from easier package management. </p>
<h2 id="improved-security">Improved security<a class="headerlink" href="#improved-security" title="Permanent link">&para;</a></h2>
<p>Sandbox Compiles are the recommended approach for Server Pro due to many LaTeX documents requiring/having the ability to execute arbitrary shell commands as part of the PDF compile process. If you use Sandboxed Compiles, each compile runs in a separate Docker container with limited capabilities that are not shared with any other user or project and has no access to outside resources such as the host network. </p>
<p>If you attempt to run Server Pro without Sandboxed Compiles, the compile runs alongside other concurrent compiles inside the main Docker container.</p>
<h2 id="easier-package-management">Easier package management<a class="headerlink" href="#easier-package-management" title="Permanent link">&para;</a></h2>
<p>To avoid manually installing packages, we recommend enabling Sandbox Compiles. This is a configurable setting within Server Pro that will provide your users with access to the same Tex Live environment as that on <a href="overleaf.com">overleaf.com</a> but within your own on-premise installation. TeX Live images used by Sandboxed Compiles contain the most popular packages and fonts tested against our gallery templates, ensuring maximum compatibility with on-premise projects. </p>
<p>Enabling Sandboxed Compiles allows you to configure which TeX Live versions users are able to choose from within their project along with setting a default TeX Live image version for new projects. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you attempt to run Server Pro without Sandboxed Compiles, your instance will default to using a basic scheme version of TeX Live for compiles. This basic version is lightweight and only contains a very limited subset of LaTex packages, which will most likely result in missing package errors for your users, especially if they try to use pre-built templates. </p>
</div>
<p>As Server Pro has been architected to work offline, there isn't an automated way to integrate <a href="overleaf.com">overleaf.com</a> gallery templates into your on-premise installation, it is, however, possible to do this manually on a per-template basis. For more information on how this works, pkeae check out our guide here: TODO:: ADD GUIDE.</p>
<div class="admonition information">
<p class="admonition-title">Information</p>
<p>Sandbox Compiles requires that the Server Pro container has access to the Docker socket on the host machine (via a bind mount) so it can manage these compile containers.</p>
</div>
<h2 id="how-it-works">How it works<a class="headerlink" href="#how-it-works" title="Permanent link">&para;</a></h2>
<p>When Sandboxed Compiles are enabled, the Docker socket will be mounted from the host machine into the <code>sharelatex</code> container, so that the compiler service in the container can create new Docker containers on the host. Then for each run of the compiler in each project, the LaTeX compiler service (CLSI) will do the following:</p>
<ul>
<li>Write out the project files to a location inside the <code>OVERLEAF_DATA_PATH</code>, </li>
<li>Use the mounted Docker socket to create a new <code>texlive</code> container for the compile run</li>
<li>Have the <code>texlive</code> container read the project data from the location under <code>OVERLEAF_DATA_PATH</code></li>
<li>Compile the project inside the <code>texlive</code> container</li>
</ul>
<h2 id="enabling-sandboxed-compiles">Enabling Sandboxed Compiles<a class="headerlink" href="#enabling-sandboxed-compiles" title="Permanent link">&para;</a></h2>
<h3 id="toolkit">Toolkit<a class="headerlink" href="#toolkit" title="Permanent link">&para;</a></h3>
<p>In <code>config/overleaf.rc</code>, set <code>SIBLING_CONTAINERS_ENABLED=true</code>, and ensure that the <code>DOCKER_SOCKET_PATH</code> setting is set to the location of the Docker socket on the host machine.</p>
<p>The next time you start the Docker services (with <code>bin/up</code>), the <code>sharelatex</code> container will verify that it can communicate with Docker on the host machine, and will pull all configured <code>texlive</code> images it requires to create the Sandboxed Compile containers. This process can take several minutes, and compiles will be un-available during this time.</p>
<p>TODO: Add steps to pull images first to minimize downtime</p>
<h3 id="docker-compose">Docker Compose<a class="headerlink" href="#docker-compose" title="Permanent link">&para;</a></h3>
<p>In this example, note the following:</p>
<ul>
<li>the Docker socket volume mounted into the <code>sharelatex</code> container</li>
<li><code>DOCKER_RUNNER</code> set to "true"</li>
<li><code>SANDBOXED_COMPILES</code> set to "true"</li>
<li><code>SANDBOXED_COMPILES_SIBLING_CONTAINERS</code> set to "true"</li>
<li><code>SANDBOXED_COMPILES_HOST_DIR</code> set to "/data/overleaf_data/data/compiles", the place on the host where the compile data will be written</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Starting with Overleaf Server CE/Server Pro <code>5.0.3</code> environment variables have been rebranded from <code>SHARELATEX_*</code> to <code>OVERLEAF_*</code>.</p>
</div>
<p>If you're using a <code>4.x</code> version (or earlier) please make sure the variables are prefix accordingly (e.g. <code>SHARELATEX_MONGO_URL</code> instead of <code>OVERLEAF_MONGO_URL</code>)</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2&#39;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sharelatex</span><span class="p">:</span>
<span class="w">        </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/sharelatex/sharelatex-pro:5.0.3</span>
<span class="w">        </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sharelatex</span>
<span class="w">        </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongo</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80:80</span>
<span class="w">        </span><span class="nt">links</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongo</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">        </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/overleaf_data:/var/lib/overleaf</span><span class="w"> </span><span class="c1"># (/var/lib/sharelatex for versions 4.x and earlier)</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock</span><span class="w">    </span><span class="c1">#### IMPORTANT</span>
<span class="w">        </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">            </span><span class="nt">OVERLEAF_MONGO_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb://mongo/sharelatex</span>
<span class="w">            </span><span class="nt">OVERLEAF_REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">            </span><span class="nt">OVERLEAF_APP_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;My</span><span class="nv"> </span><span class="s">Overleaf&#39;</span>
<span class="w">            </span><span class="nt">OVERLEAF_SITE_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://overleaf.mydomain.com&quot;</span>
<span class="w">            </span><span class="nt">OVERLEAF_NAV_TITLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Our</span><span class="nv"> </span><span class="s">Overleaf</span><span class="nv"> </span><span class="s">Instance&quot;</span>
<span class="w">            </span><span class="nt">OVERLEAF_ADMIN_EMAIL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;support@example.com&quot;</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">            </span><span class="nt">DOCKER_RUNNER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="nt">SANDBOXED_COMPILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="nt">SANDBOXED_COMPILES_SIBLING_CONTAINERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">    </span><span class="c1">#### IMPORTANT</span>
<span class="w">            </span><span class="c1"># Note: (/var/lib/sharelatex for versions 4.x and earlier)</span>
<span class="w">            </span><span class="nt">SANDBOXED_COMPILES_HOST_DIR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/data/overleaf_data/data/compiles&quot;</span><span class="w">  </span><span class="c1">#### IMPORTANT </span>
</code></pre></div>
<h2 id="changing-the-tex-live-image">Changing the Tex Live Image<a class="headerlink" href="#changing-the-tex-live-image" title="Permanent link">&para;</a></h2>
<p>Server Pro uses three environment variables to determine which Tex Live images to use for Sandboxed Compiles: </p>
<ul>
<li><code>TEX_LIVE_DOCKER_IMAGE</code>: name of the default image for new projects</li>
<li><code>ALL_TEX_LIVE_DOCKER_IMAGES</code>: comma-separated list of all images in use</li>
<li><code>ALL_TEX_LIVE_DOCKER_IMAGE_NAMES</code>: <strong>Optional</strong>: comma-separated list of user-facing friendly names for the images. If omitted, the version number will be used, for example, <code>texlive-full:2018.1</code></li>
</ul>
<p>When the Server Pro instance starts up, it will pull all of the images listed in <code>ALL_TEX_LIVE_DOCKER_IMAGES</code>. </p>
<p>The current default is <code>quay.io/sharelatex/texlive-full:2017.1</code>, but you can override these values in the <code>config/variables.env</code> if you are using the Toolkit or  the <code>environment</code> section of the `docker-compose.yml' file if you are using Docker Compose.</p>
<p>Here's an example where we default to TeX Live 2023 for new projects, and keep both 2023 and 2022 in use for older projects:</p>
<div class="highlight"><pre><span></span><code>    TEX_LIVE_DOCKER_IMAGE: &quot;quay.io/sharelatex/texlive-full:2023.1&quot;
    ALL_TEX_LIVE_DOCKER_IMAGES: &quot;quay.io/sharelatex/texlive-full:2023.1,quay.io/sharelatex/texlive-full:2022.1&quot;
    ALL_TEX_LIVE_DOCKER_IMAGE_NAMES: &quot;TeX Live 2023.1,TeX Live 2022.1&quot;
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before updating to a newer version of Tex Live we strongly recommend <a href="/maintenance/data-and-backups#performing-a-consistent-backup">performing a consistent back</a> of your data and <a href="https://github.com/overleaf/overleaf/wiki/Server-Pro:-setup#updating-image-versions">updating to the latest version of Server Pro available</a>.</p>
</div>
<h3 id="available-tex-live-images">Available Tex Live images<a class="headerlink" href="#available-tex-live-images" title="Permanent link">&para;</a></h3>
<p>These are all the Tex Live images that can be added to <code>TEX_LIVE_DOCKER_IMAGE</code> and <code>ALL_TEX_LIVE_DOCKER_IMAGES</code>:</p>
<ul>
<li><code>quay.io/sharelatex/texlive-full:2023.1</code></li>
<li><code>quay.io/sharelatex/texlive-full:2022.1</code></li>
<li><code>quay.io/sharelatex/texlive-full:2021.1</code></li>
<li><code>quay.io/sharelatex/texlive-full:2020.1</code> (legacy)</li>
<li><code>quay.io/sharelatex/texlive-full:2019.1</code> (legacy)</li>
<li><code>quay.io/sharelatex/texlive-full:2018.1</code> (legacy) </li>
<li><code>quay.io/sharelatex/texlive-full:2017.1</code> (legacy)</li>
<li><code>quay.io/sharelatex/texlive-full:2016.1</code> (legacy)</li>
<li><code>quay.io/sharelatex/texlive-full:2015.1</code> (legacy)</li>
<li><code>quay.io/sharelatex/texlive-full:2014.2</code> (legacy)</li>
</ul>
<h2 id="extending-tex-live">Extending Tex Live<a class="headerlink" href="#extending-tex-live" title="Permanent link">&para;</a></h2>
<p>It's possible to extend an existing Tex Live image using a new Dockerfile and configure the application to use the new image. </p>
<p>Here we offer some guidelines to install new packages or fonts, but the configuration of a custom image is not covered by our support terms. </p>
<p>The TeX Live images receive infrequent updates. We suggest rebuilding custom images when upgrading Server Pro.</p>
<h3 id="installing-and-updating-new-packages">Installing and updating new packages<a class="headerlink" href="#installing-and-updating-new-packages" title="Permanent link">&para;</a></h3>
<p>You can use <code>tlmgr</code> commands such as <code>tlmgr install</code> and <code>tlmgr update</code> to manage Tex Live packages as in the following example:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">quay.io/sharelatex/texlive-full:2023.1</span>

<span class="k">RUN</span><span class="w"> </span>tlmgr<span class="w"> </span>update<span class="w"> </span>--force<span class="w"> </span>ebproof
</code></pre></div>
<h3 id="using-tlmgr-in-an-older-tex-live-image">Using <code>tlmgr</code> in an older TeX Live image<a class="headerlink" href="#using-tlmgr-in-an-older-tex-live-image" title="Permanent link">&para;</a></h3>
<p>By default <code>tlmgr</code> downloads resources from the latest TeX Live release. When patching an older TeX Live image, the downloads need to be switched to the respective archive. See the list in https://www.tug.org/historic/ for mirrors of archives.</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">quay.io/sharelatex/texlive-full:2022.1</span>

<span class="k">RUN</span><span class="w"> </span>tlmgr<span class="w"> </span>option<span class="w"> </span>repository<span class="w"> </span>&lt;MIRROR&gt;/systems/texlive/&lt;YEAR&gt;/tlnet-final
<span class="c"># e.g. RUN tlmgr option repository ftp://tug.org/historic/systems/texlive/2022/tlnet-final</span>

<span class="k">RUN</span><span class="w"> </span>tlmgr<span class="w"> </span>update<span class="w"> </span>--force<span class="w"> </span>ebproof
</code></pre></div>
<h3 id="installing-new-fonts">Installing new fonts<a class="headerlink" href="#installing-new-fonts" title="Permanent link">&para;</a></h3>
<p>There are different procedures to install new fonts in a Tex Live distribution, and installing a custom font might require several steps. Checking the <a href="https://tug.org/fonts/fontinstall.html">instructions to install TeX fonts</a> in the official Tex Live documentation is probably a good starting point.</p>
<p>The following <code>Dockerfile</code> shows an example of installing a TrueType font over an existing Tex Live 2022 image:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">quay.io/sharelatex/texlive-full:2022.1</span>

<span class="k">COPY</span><span class="w"> </span>./myfonts/*.ttf<span class="w"> </span>/usr/share/fonts/truetype/myfont/

<span class="c"># rebuild font information cache</span>
<span class="k">RUN</span><span class="w"> </span>fc-cache
</code></pre></div>
<h3 id="configuring-server-pro-to-use-the-new-images">Configuring Server Pro to use the new images<a class="headerlink" href="#configuring-server-pro-to-use-the-new-images" title="Permanent link">&para;</a></h3>
<p>Use the name <code>quay.io/sharelatex/texlive-full</code> and a custom tag to build the new image, as in:</p>
<div class="highlight"><pre><span></span><code>docker build -t quay.io/sharelatex/texlive-full:2023.1-custom
</code></pre></div>
<p>We can now configure Server Pro to use the new <code>2023.1-custom</code> image updating the <code>TEX_LIVE_DOCKER_IMAGE</code> and <code>ALL_TEX_LIVE_DOCKER_IMAGES</code> environment variables:</p>
<div class="highlight"><pre><span></span><code>TEX_LIVE_DOCKER_IMAGE: &quot;quay.io/sharelatex/texlive-full:2023.1-custom&quot;
ALL_TEX_LIVE_DOCKER_IMAGES: &quot;quay.io/sharelatex/texlive-full:2023.1,quay.io/sharelatex/texlive-full:2023.1-custom&quot;
</code></pre></div>
<p>In the example above new projects are set by default to use the new <code>2023.1-custom</code> image, while <code>2023.1</code> is still available for when it's needed.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../getting-server-pro/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting Server Pro">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Getting Server Pro
              </div>
            </div>
          </a>
        
        
          
          <a href="../ldap/" class="md-footer__link md-footer__link--next" aria-label="Next: LDAP/AD">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                LDAP/AD
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.share", "navigation.tabs", "navigation.footer", "navigation.path", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate", "content.action.edit", "navigation.expand"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "tags": {"Server Pro": "server_pro"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>